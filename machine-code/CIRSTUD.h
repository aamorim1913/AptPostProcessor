BEGIN PGM CIRSTUD  MM
CYCL DEF 7.0 DATUM SHIFT
CYCL DEF 7.1  X+0
CYCL DEF 7.2  Y+0
CYCL DEF 7.3  Z+0
L Z-10 FMAX M91 M9
TOOL CALL 1 Z S3500
STOP
; set bottom z, x=-r-rtool and ymax out of stock
FN18: SYSREAD Q32 = ID270 NR1 IDX3
FN18: SYSREAD Q2 = ID270 NR1 IDX2
Q4 = (0 - Q32 ) / 2.5 
Q5 = INT Q4
Q6 = Q32 + 2.5
Q3 = Q6 + Q5 * 2.5 
FN12: IF +Q3 LT +0 GOTO LBL 2
CC X+0 Y+0
L Z+10 FMAX
M3 M8
L Z+0 F100
LBL 1
L IZ-2.5 F100
L Y+0
C DR+
L Y-10
L IZ+100 FMAX M9
L Y+Q2 FMAX
L IZ-90 FMAX M8
L IZ-10 F100 
FN18: SYSREAD Q3 = ID270 NR1 IDX3
FN12: IF +Q3 LT +Q6  GOTO LBL 2
CALL LBL 1 REP 25/25
LBL 2
L Z-10 FMAX M91 M9 M5
END PGM CIRSTUD MM
