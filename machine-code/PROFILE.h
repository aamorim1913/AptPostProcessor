BEGIN PGM PROFILE  MM
TOOL CALL 1 Z S3500
STOP
; Tool to bottom Z 
FN18: SYSREAD Q23 = ID270 NR1 IDX3
STOP
; Tool out of xmax ymax
FN18: SYSREAD Q21 = ID270 NR1 IDX1
FN18: SYSREAD Q22 = ID270 NR1 IDX2
STOP
; Top Z out of xmin ymin
FN18: SYSREAD Q11 = ID270 NR1 IDX1
FN18: SYSREAD Q12 = ID270 NR1 IDX2
FN18: SYSREAD Q13 = ID270 NR1 IDX3
Q1 = Q11 + 7
Q11 = Q1
Q1 = Q12 + 7
Q12 = Q1
Q1 = Q21 - 7
Q21 = Q1
Q1 = Q22 - 7
Q22 = Q1
Q4 = ( Q13 - Q23 ) / 2.5
Q5 = INT Q4
Q4 = Q23 + ( Q5 + 1 ) * 2.5
FN12: IF +Q4 LT +Q13 GOTO LBL 2
Q13 = Q4
L Z + Q13 FMAX
Q23 = Q23 - 2.5
M3 M8
LBL 1
APPR LT X+Q11 Y+Q12 IZ - 2.5 LEN10 RR F300
L X+Q21
L Y+Q22
L X+Q11
L Y+Q12
DEP LT LEN10 R0
FN18: SYSREAD Q3 = ID270 NR1 IDX3
FN12: IF +Q3 LT +Q23 GOTO LBL 2
CALL LBL 1 REP 25/25
LBL 2
M9 M5
END PGM PROFILE MM
